<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TS 新手指南 | Midway</title>
    <meta name="description" content="面向未来的 Web 全栈应用开发框架">
    
    
    <link rel="preload" href="/midway/assets/css/0.styles.957e9604.css" as="style"><link rel="preload" href="/midway/assets/js/app.26343d16.js" as="script"><link rel="preload" href="/midway/assets/js/12.2324f9c8.js" as="script"><link rel="prefetch" href="/midway/assets/js/10.f62d05bd.js"><link rel="prefetch" href="/midway/assets/js/11.78a97643.js"><link rel="prefetch" href="/midway/assets/js/13.53edddca.js"><link rel="prefetch" href="/midway/assets/js/2.5c88b4ad.js"><link rel="prefetch" href="/midway/assets/js/3.daf2be7b.js"><link rel="prefetch" href="/midway/assets/js/4.827ef9fc.js"><link rel="prefetch" href="/midway/assets/js/5.223f31bd.js"><link rel="prefetch" href="/midway/assets/js/6.1165bd8a.js"><link rel="prefetch" href="/midway/assets/js/7.5495e64f.js"><link rel="prefetch" href="/midway/assets/js/8.ad6ced6f.js"><link rel="prefetch" href="/midway/assets/js/9.f354a6a8.js">
    <link rel="stylesheet" href="/midway/assets/css/0.styles.957e9604.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/midway/" class="home-link router-link-active"><!----> <span class="site-name">Midway</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/midway/" class="nav-link">首页</a></div><div class="nav-item"><a href="/midway/guide.html" class="nav-link">使用文档</a></div><div class="nav-item"><a href="/midway/ioc.html" class="nav-link">依赖注入手册</a></div><div class="nav-item"><a href="/midway/tool_set.html" class="nav-link">工具集</a></div><div class="nav-item"><a href="/midway/ts_start.html" class="nav-link router-link-exact-active router-link-active">TS 新手指南</a></div><div class="nav-item"><a href="http://midwayjs.org/midway/api-reference/globals.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">MidwayJs 系列产品</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/midway/" class="nav-link">Midway - 面向未来的 Web 全栈框架</a></li></ul></li><li class="dropdown-item"><h4>应用管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://midwayjs.org/pandora/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Pandora.js - Node.js 应用管理器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>监控产品</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/midwayjs/sandbox-docker" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sandbox - 私有化 Node.js 监控产品
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>Node.js 依赖注入模块</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://midwayjs.org/injection" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Injection - 让你的应用用上 IoC，体验依赖注入的感觉
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/midway/ts_start.html" class="nav-link router-link-exact-active router-link-active">zh-CN</a></li><li class="dropdown-item"><!----> <a href="/midway/en/ts_start.html" class="nav-link">en-US</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/midway/" class="nav-link">首页</a></div><div class="nav-item"><a href="/midway/guide.html" class="nav-link">使用文档</a></div><div class="nav-item"><a href="/midway/ioc.html" class="nav-link">依赖注入手册</a></div><div class="nav-item"><a href="/midway/tool_set.html" class="nav-link">工具集</a></div><div class="nav-item"><a href="/midway/ts_start.html" class="nav-link router-link-exact-active router-link-active">TS 新手指南</a></div><div class="nav-item"><a href="http://midwayjs.org/midway/api-reference/globals.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">MidwayJs 系列产品</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/midway/" class="nav-link">Midway - 面向未来的 Web 全栈框架</a></li></ul></li><li class="dropdown-item"><h4>应用管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://midwayjs.org/pandora/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Pandora.js - Node.js 应用管理器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>监控产品</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/midwayjs/sandbox-docker" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sandbox - 私有化 Node.js 监控产品
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>Node.js 依赖注入模块</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="http://midwayjs.org/injection" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Injection - 让你的应用用上 IoC，体验依赖注入的感觉
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/midway/ts_start.html" class="nav-link router-link-exact-active router-link-active">zh-CN</a></li><li class="dropdown-item"><!----> <a href="/midway/en/ts_start.html" class="nav-link">en-US</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>TS 新手指南</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/midway/ts_start.html#应用目录结构" class="sidebar-link">应用目录结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/midway/ts_start.html#ts-依赖" class="sidebar-link">ts 依赖</a></li><li class="sidebar-sub-header"><a href="/midway/ts_start.html#src-和-dist" class="sidebar-link">src 和 dist</a></li><li class="sidebar-sub-header"><a href="/midway/ts_start.html#tsconfig-json-文件" class="sidebar-link">tsconfig.json 文件</a></li><li class="sidebar-sub-header"><a href="/midway/ts_start.html#tslint-json" class="sidebar-link">tslint.json</a></li></ul></li><li><a href="/midway/ts_start.html#关于导出和导入" class="sidebar-link">关于导出和导入</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/midway/ts_start.html#export-变量" class="sidebar-link">export 变量</a></li><li class="sidebar-sub-header"><a href="/midway/ts_start.html#默认导出" class="sidebar-link">默认导出</a></li><li class="sidebar-sub-header"><a href="/midway/ts_start.html#default-导出" class="sidebar-link">default 导出</a></li><li class="sidebar-sub-header"><a href="/midway/ts_start.html#一般导入" class="sidebar-link">一般导入</a></li><li class="sidebar-sub-header"><a href="/midway/ts_start.html#默认导入" class="sidebar-link">默认导入</a></li></ul></li><li><a href="/midway/ts_start.html#相关链接" class="sidebar-link">相关链接</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="ts-新手指南"><a href="#ts-新手指南" class="header-anchor">#</a> TS 新手指南</h1> <p>Typescript 和 Javascript 既相似又有着许多不同，以往的 Node.js 应用和模块大多都是 Javascript 写的。</p> <p>而 Midway 在阿里沉淀多年，在多人协作和开发的过程中我们发现，Typescript 的接口定义和类型系统，使得应用编码出错的概率大大降低。</p> <p>在全新的体系中，我们 <strong>推荐使用 Typescript 语法来编码</strong>。</p> <h2 id="应用目录结构"><a href="#应用目录结构" class="header-anchor">#</a> 应用目录结构</h2> <p>虽然 Typescript 的目录多种多样，但是在统一的编码规范中，我们推荐常用的一种，这里就简单介绍我们常见的目录以及文件。</p> <div class="language- extra-class"><pre class="language-text"><code>├── app
   ├── README.md
   ├── .gitignore
   ├── package.json
   ├── src
   ├── dist
   ├── test
   ├── tsconfig.json
   └── tslint.json
</code></pre></div><p>最常见的目录结构如下，我们一一来介绍。</p> <h3 id="ts-依赖"><a href="#ts-依赖" class="header-anchor">#</a> ts 依赖</h3> <p>在介绍目录之前，我们先介绍应用需要安装的依赖，这些依赖已经作为默认内容在脚手架中提供。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// in package.json</span>
<span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;@types/mocha&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.2.5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;@types/node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^10.5.5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ts-node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.9.1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;typescript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.8.0&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里的依赖有两部分，<code>@types/*</code> 开头的定义文件和其他 ts 运行时需要的文件。</p> <ul><li>@types/node - Node.js 的定义包，有了它原生内置的模块就有了类型定义，@types/mocha 同理</li> <li>typescript - 微软提供的 ts 核心包，提供了高阶的语法糖支持，同时也提供了 tsc 等编译器。</li> <li>ts-node - 三方提供的运行环境，由于 js 运行无需编译，只需要 <code>node index.js</code> 即可运行，同理，可以用 <code>ts-node index.ts</code> 来直接运行 ts，方便开发</li></ul> <h3 id="src-和-dist"><a href="#src-和-dist" class="header-anchor">#</a> src 和 dist</h3> <p>由于 Typescript 是编译过程中进行类型检查，虽然在开发过程中可以通过类似 <a href="https://github.com/TypeStrong/ts-node" target="_blank" rel="noopener noreferrer">ts-node<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这样的模块来简化，但是最终应用部署前，还是需要打包编译的，midway 提供了 <code>midway-bin build</code> 命令进行编译，这一内容将在工具部分来提供。</p> <p><code>src</code> 目录存放 Typescript 源文件，Typescript 源文件由 <code>*.ts</code> 结尾，而编译后的文件为 <code>*.js</code>，在一般情况下，和源文件一一对应。</p> <h3 id="tsconfig-json-文件"><a href="#tsconfig-json-文件" class="header-anchor">#</a> tsconfig.json 文件</h3> <p>这是 Typescript 的核心配置文件，一般在应用根目录，里面的配置项一般是都是指定编译环境。</p> <p>比如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ES2017&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;experimentalDecorators&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;noImplicitThis&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;noUnusedLocals&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;stripInternal&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pretty&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;declaration&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;es2017&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;dist&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;test&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre></div><p><code>experimentalDecorators</code> 就是用来表示是否启用装饰器，<code>noUnusedLocals</code> 表示是否存在没有使用的本地变量编译时报错，这些配置信息都可以在 <a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 查询到。</p> <h3 id="tslint-json"><a href="#tslint-json" class="header-anchor">#</a> tslint.json</h3> <p>Tslint 对应于 Eslint 或者 Jslint，用于在不同时期进行检查，这里的配置也和 Eslint 非常相似。</p> <p>比如有一些规则，每条有对应了不同的内容，比如使用单引号，不允许 <code>var</code> 关键字等，如果觉得开发习惯不同，可以根据 <a href="https://github.com/palantir/tslint" target="_blank" rel="noopener noreferrer">官方规则<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 进行调整。</p> <p>如果你想知道 Tslint 有什么区别，可以查看 <a href="https://ts.xcatliu.com/engineering/lint.html" target="_blank" rel="noopener noreferrer">这篇文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="关于导出和导入"><a href="#关于导出和导入" class="header-anchor">#</a> 关于导出和导入</h2> <p>我们常用的导出有两种写法。</p> <h3 id="export-变量"><a href="#export-变量" class="header-anchor">#</a> export 变量</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// js 写法</span>
<span class="token keyword">function</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
exports<span class="token punctuation">.</span>alert <span class="token operator">=</span> alert<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>config <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ts 写法</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>用 <code>export</code> 关键字即可。</p> <h3 id="默认导出"><a href="#默认导出" class="header-anchor">#</a> 默认导出</h3> <p>在以前我们很习惯 <code>module.exports</code> 来将整个对象进行导出，而切换到 ts 之后，请尽量不要使用这种做法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// js 写法</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ts 写法</span>
<span class="token keyword">export</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function-variable function">export</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">注意</p> <p>两种写法无法并存，请尽量使用 <code>export</code> 进行导出。</p></div> <h3 id="default-导出"><a href="#default-导出" class="header-anchor">#</a> default 导出</h3> <p>在很多时候，在代码中会有做 <code>default 导出的支持</code>，比如在 <code>egg-core</code> 中的加载部分:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// require js module</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>obj<span class="token punctuation">)</span> <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token comment">// it's es module</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>__esModule<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'default'</span> <span class="token keyword">in</span> obj <span class="token operator">?</span> obj<span class="token punctuation">.</span>default <span class="token operator">:</span> obj<span class="token punctuation">;</span>
</code></pre></div><p>这个时候我们将代码写成如下也是可以支持的。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><p>编译成 js，则会变成</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> <span class="token string">&quot;__esModule&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>default <span class="token operator">=</span> <span class="token punctuation">{</span>
  
<span class="token punctuation">}</span>
</code></pre></div><h3 id="一般导入"><a href="#一般导入" class="header-anchor">#</a> 一般导入</h3> <p>一般情况下，我们在 js 上会使用 <code>require</code> 关键字进行导入，而在 ts 语法下，这样导入会丢失类型，所以在 ts 下写法有所不同。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// js 写法</span>
<span class="token keyword">const</span> applicatoin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'midway'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>application<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>applicatoin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'midway'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ts 写法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> applicatoin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'midway'</span><span class="token punctuation">;</span>
</code></pre></div><p>这样写，<code>midway</code> 包中的类型定义才可以被正常解析。</p> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>只有使用 <code>export</code> 进行导出的属性才能被 <code>import</code>，不然就需要换一种写法。</p></div> <h3 id="默认导入"><a href="#默认导入" class="header-anchor">#</a> 默认导入</h3> <p>有时候，三方包或者内置模块是通过 <code>module.exports</code> 出来的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// js 写法</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这个时候可以使用 <code>*</code> 做全部导出。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ts 写法</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="相关链接"><a href="#相关链接" class="header-anchor">#</a> 相关链接</h2> <ul><li><a href="https://ts.xcatliu.com/" target="_blank" rel="noopener noreferrer">Typescript 入门教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://zhongsp.gitbooks.io/typescript-handbook/" target="_blank" rel="noopener noreferrer">Typescript Handbook<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/midway/assets/js/app.26343d16.js" defer></script><script src="/midway/assets/js/12.2324f9c8.js" defer></script>
  </body>
</html>
